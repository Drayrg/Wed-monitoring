# Инструкция по подключению реальных системных метрик

## Обзор
Данная инструкция описывает процесс подключения реальных системных метрик к приложению SystemPulse. Приложение разработано для отображения реальной информации о вашей системе, а не симулированных данных.

## Требования
- Python 3.6 или выше
- Установленная библиотека `psutil` для сбора системных метрик
- Приложение SystemPulse, запущенное на localhost:5000

## Установка необходимых компонентов

### 1. Установка библиотеки psutil
Откройте командную строку/терминал и выполните:

```bash
pip install psutil requests
```

### 2. Подготовка Python-клиента
Скрипт `system_metrics_client.py` уже создан и находится в корневой директории проекта. Этот скрипт собирает системные метрики и отправляет их на сервер.

## Инициализация системного профиля
Перед запуском Python-клиента необходимо инициализировать системный профиль в базе данных:

1. Убедитесь, что приложение запущено (должен работать workflow "Start application")
2. Выполните запрос к API для инициализации системы:

```bash
curl http://localhost:5000/api/initialize
```

Вы должны получить ответ с подтверждением создания системного профиля.

## Запуск Python-клиента
Запустите Python-клиент для сбора и отправки реальных системных метрик:

```bash
python system_metrics_client.py
```

Дополнительные параметры:
- `--server URL` - URL сервера (по умолчанию: http://localhost:5000)
- `--interval SECONDS` - интервал обновления в секундах (по умолчанию: 3)
- `--profile ID` - ID системного профиля (по умолчанию: 1)

Пример с параметрами:
```bash
python system_metrics_client.py --server http://localhost:5000 --interval 2 --profile 1
```

## Проверка работы
После запуска клиента, веб-интерфейс должен начать отображать реальные данные вашей системы:

1. CPU Usage - реальная загрузка процессора
2. Memory Usage - использование оперативной памяти
3. Battery Status - состояние батареи (если доступно)
4. Network Information - информация о сетевом подключении
5. Исторические графики показывают данные, собранные с течением времени

## Устранение проблем

### Проблема с отображением StatusBar в CPU Usage
Если у вас возникли проблемы с отображением статусной полосы CPU Usage, это уже исправлено в коде. Теперь шкала корректно отображается для любых значений от 0 до 100%.

### Данные не обновляются
Если данные не обновляются в веб-интерфейсе:

1. Убедитесь, что Python-клиент запущен и успешно отправляет данные (вы должны видеть сообщения об успешной отправке)
2. Проверьте, что сервер запущен и доступен по адресу http://localhost:5000
3. Проверьте консоль браузера на наличие ошибок
4. Перезапустите Python-клиент с параметром `--interval 1` для более частого обновления

### Ошибки доступа к системным метрикам
На некоторых системах могут возникать ошибки доступа к определенным метрикам. Это нормально, так как разные операционные системы предоставляют разный уровень доступа к системной информации. В этом случае соответствующие метрики будут отображаться как "N/A" или "Unknown".

## Техническая информация
Python-клиент выполняет следующие действия:

1. Собирает системные метрики с помощью библиотеки psutil
2. Форматирует данные в соответствии с требованиями API
3. Отправляет данные по HTTP POST запросу на эндпоинт `/api/metrics`
4. Сервер сохраняет полученные метрики в базе данных PostgreSQL
5. Веб-интерфейс получает актуальные данные при запросе API

## Настройка для использования в сети
Для доступа к приложению из другого компьютера в локальной сети:

1. Определите IP-адрес компьютера с запущенным сервером
2. В Python-клиенте укажите полный URL:
   ```bash
   python system_metrics_client.py --server http://IP_АДРЕС:5000
   ```

## Дополнительная доработка
Вы можете расширить функциональность Python-клиента для сбора дополнительных метрик, соответствующих вашим требованиям, путем модификации файла `system_metrics_client.py`.